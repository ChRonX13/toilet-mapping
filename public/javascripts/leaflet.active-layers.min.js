L.Control.ActiveLayers=L.Control.Layers.extend({getActiveBaseLayer:function(){return this._activeBaseLayer},getActiveOverlayLayers:function(){return this._activeOverlayLayers},onAdd:function(e){var t=L.Control.Layers.prototype.onAdd.call(this,e);this._activeBaseLayer=this._findActiveBaseLayer();this._activeOverlayLayers=this._findActiveOverlayLayers();return t},_findActiveBaseLayer:function(){var e=this._layers;for(var t in e){if(this._layers.hasOwnProperty(t)){var n=e[t];if(!n.overlay&&this._map.hasLayer(n.layer)){return n}}}throw new Error("Control doesn't have any active base layer!")},_findActiveOverlayLayers:function(){var e={};var t=this._layers;for(var n in t){if(this._layers.hasOwnProperty(n)){var r=t[n];if(r.overlay&&this._map.hasLayer(r.layer)){e[n]=r}}}return e},_onInputClick:function(){var e,t,n,r=this._form.getElementsByTagName("input"),i=r.length,s;this._handlingClick=true;for(e=0;e<i;e++){t=r[e];n=this._layers[t.layerId];if(t.checked&&!this._map.hasLayer(n.layer)){if(!n.overlay){s=n.layer;this._activeBaseLayer=n}else{this._activeOverlayLayers[t.layerId]=n}this._map.addLayer(n.layer)}else if(!t.checked&&this._map.hasLayer(n.layer)){if(n.overlay){delete this._activeOverlayLayers[t.layerId]}this._map.removeLayer(n.layer)}}if(s){this._map.setZoom(this._map.getZoom());this._map.fire("baselayerchange",{layer:s})}this._handlingClick=false}});L.control.activeLayers=function(e,t,n){return new L.Control.ActiveLayers(e,t,n)}